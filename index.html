<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trending4Ever</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Space+Grotesk:wght@400;500;700;900&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            space_grotesk: ['"Space Grotesk"', 'sans-serif'],
            nunito_sans: ['"Nunito Sans"', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    /* Anima Badge Styles */
    .anima-badge .badge-button:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(108, 83, 206, 0.3); }
    .anima-badge .badge-content { display: inline-flex; align-items: center; gap: 8px; position: relative; flex: 0 0 auto; }
    .anima-badge .badge-icon { position: relative; width: 16px; height: 16px; }
    .anima-badge .badge-text { position: relative; width: fit-content; font-family: 'Nunito Sans', sans-serif; color: white; font-size: 14px; white-space: nowrap; }
    .anima-badge { position: fixed; bottom: 20px; right: 20px; z-index: 100; background: #4F46E5; padding: 8px 12px; border-radius: 8px; display: flex; gap: 8px; align-items: center; text-decoration: none; color: white; }

    /* Custom Scrollbar for comments */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.3); }

    /* Modal Animation */
    .modal-enter { opacity: 0; transform: scale(0.95); }
    .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 0.3s ease, transform 0.3s ease; }
    .modal-exit { opacity: 1; transform: scale(1); }
    .modal-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 0.2s ease, transform 0.2s ease; }

    /* Waterfall Entry Animation (Individual Card Entry) */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .card-entry {
        opacity: 0; /* Hidden by default until animation kicks in */
    }

    /* === WATERFALL BACKGROUND EFFECT (Applied to the Feed Section Container) === */
    @keyframes flow {
        0% { background-position: 0 0; }
        100% { background-position: 0 1000px; /* Define flow height */ }
    }
    
    #feed-container {
        position: relative; /* Container for the absolute pseudo-element */
        overflow: hidden; /* Prevents background animation from spilling out */
    }

    #feed-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        /* Subtle repeating linear-gradient for the droplet effect */
        background-image: repeating-linear-gradient(
            to bottom,
            rgba(173, 216, 230, 0.05), /* Very light blue for subtle effect */
            rgba(173, 216, 230, 0.05) 1px,
            transparent 1px,
            transparent 15px /* Space between droplets */
        );
        background-size: 100% 1000px; /* Size of the repeating pattern */
        animation: flow 10s linear infinite; /* Slow, continuous downward flow */
        z-index: 1; /* Below content */
        pointer-events: none;
    }

    /* Hide the scrollbar only for the auto-scrolling area for a cleaner look */
    #feed-scroll-area::-webkit-scrollbar {
        display: none;
    }
    #feed-scroll-area {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }

    /* API key input bar sticky styling */
    .key-input-sticky {
      position: sticky;
      top: 0;
      z-index: 50;
    }

    /* Utility for hidden */
    .hidden { display: none; }
  </style>
</head>
<body class="text-black text-base not-italic normal-nums font-normal box-border h-full w-full bg-gray-900">

<!-- Anima Badge -->
<div class="anima-badge" id="anima-badge">
  <div class="badge-text">Built with Anima</div>
</div>

<div id="app">
  <div class="text-white bg-gray-900 min-h-[1000px] overflow-x-clip font-nunito_sans">
    <div class="fixed bg-[linear-gradient(to_right,rgb(255,0,127),rgb(0,255,255),rgb(255,65,54))] h-1 origin-[0%_50%] z-50 top-0 inset-x-0 md:scale-x-0"></div>

    <!-- API Key input (appears once; removed after submission) -->
    <div id="api-key-bar" class="key-input-sticky backdrop-blur-xl bg-gray-900/90 w-full border-b border-white/10">
      <div class="w-full mx-auto px-4 py-4 md:max-w-screen-xl flex items-center gap-3">
        <label for="api-key-input" class="text-sm text-gray-300 font-semibold">Paste YouTube API key:</label>
        <input id="api-key-input" type="text" class="flex-1 max-w-md rounded-md px-3 py-2 text-black" placeholder="Enter API key">
        <button id="api-key-submit" class="text-sm font-bold bg-pink-600 hover:bg-pink-500 text-white px-4 py-2 rounded-md">Start Live Feed</button>
        <div id="api-key-error" class="text-sm text-red-400 ml-2 hidden">Invalid key or quota exceeded.</div>
      </div>
    </div>

    <header class="bg-gray-900 w-full border-gray-800 border-b border-solid">
      <div class="max-w-[1920px] mx-auto px-4 py-6">
        <div class="text-center">
          <h1 class="text-5xl font-extrabold tracking-[-2.4px] leading-[48px] mb-2 font-space_grotesk md:text-7xl md:font-black md:tracking-[-3.6px] md:leading-[72px]">
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(255,0,127)_0%,rgb(0,255,255)_100%)] inline-block">V</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(0,255,255)_0%,rgb(255,0,127)_100%)] inline-block">i</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(255,0,127)_0%,rgb(0,255,255)_100%)] inline-block">b</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(0,255,255)_0%,rgb(255,0,127)_100%)] inline-block">e</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(255,0,127)_0%,rgb(0,255,255)_100%)] inline-block">N</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(0,255,255)_0%,rgb(255,0,127)_100%)] inline-block">o</span>
            <span class="bg-clip-text text-transparent bg-[linear-gradient(135deg,rgb(255,0,127)_0%,rgb(0,255,255)_100%)] inline-block">w</span>
          </h1>
          <p class="text-gray-400 text-xl font-medium">Your live wall of trending vibes</p>
        </div>
      </div>
    </header>

    <main class="relative w-full">

      <!-- Hero -->
      <section class="relative flex justify-center min-h-[500px] w-full overflow-hidden pt-12 md:pt-20">
        <div class="absolute inset-0 pointer-events-none">
          <div class="absolute [mask-image:linear-gradient(rgb(0,0,0)_40%,rgba(0,0,0,0)_100%)] bg-[linear-gradient(to_right,rgb(51,51,51)_1px,rgba(0,0,0,0)_1px),linear-gradient(rgb(51,51,51)_1px,rgba(0,0,0,0)_1px)] bg-size-[64px_64px,64px_64px] opacity-20 inset-0"></div>
          <div class="absolute bg-[linear-gradient(rgba(255,0,127,0.1),rgba(0,0,0,0))] blur-3xl h-[500px] opacity-50 w-full left-0 top-0"></div>
        </div>

        <div class="relative flex flex-col max-w-none text-center w-full z-10 mx-auto px-4 md:max-w-screen-xl">
          <div><div class="text-cyan-400 text-sm font-medium inline-flex backdrop-blur-sm bg-cyan-400/10 tracking-[1.4px] uppercase border border-cyan-400 mb-6 px-4 py-2 rounded-md">
            <span class="bg-cyan-400 block h-2 w-2 mr-2 rounded-full"></span>Live Feed Active
          </div></div>

          <div><h1 class="text-transparent text-6xl font-black bg-clip-text bg-[linear-gradient(rgb(255,255,255),rgba(255,255,255,0.5))] tracking-[-3px] mb-8 font-space_grotesk md:text-8xl">VIBE<span class="text-pink-600">NOW</span></h1></div>

          <div><p class="text-gray-400 text-xl font-medium tracking-[-0.5px] max-w-2xl mb-12 mx-auto md:text-2xl md:font-semibold">Your live wall of trending vibes. We aggregate the pulse of the internet into a single, electrifying stream.</p></div>

          <div>
            <div class="flex flex-col gap-y-4 gap-x-4 md:flex-row items-center justify-center">
              <button class="text-lg font-bold items-center bg-pink-600 shadow-[rgba(255,0,127,0.5)_0_0_20px_0] gap-x-2 flex h-14 justify-center tracking-[-0.45px] px-8 rounded-full hover:bg-pink-500 transition-colors text-white">
                Start Watching
              </button>
              <button class="text-gray-300 text-lg items-center bg-transparent border border-gray-700 h-14 px-8 rounded-full hover:bg-gray-800 transition-colors">Explore Platforms</button>
            </div>
          </div>
        </div>
        <div class="absolute bg-[linear-gradient(to_top,rgb(17,24,39),rgba(0,0,0,0))] h-[150px] pointer-events-none z-20 bottom-0 inset-x-0"></div>
      </section>

      <!-- Viral Spotlight -->
      <section class="relative bg-gray-900/50 w-full py-16 border-y border-solid border-white/10">
        <div class="w-full mx-auto px-4 md:max-w-screen-xl">
          <div class="flex flex-col items-start mb-10">
            <h2 class="text-3xl font-bold flex items-center gap-3 font-space_grotesk md:text-4xl md:font-extrabold text-white">
              Viral Spotlight
            </h2>
            <div class="bg-red-500 h-1 w-20 mt-3 rounded-full"></div>
          </div>

          <div class="grid md:grid-cols-12 gap-6">
            <div class="md:col-span-8 cursor-pointer group card-trigger" data-embed-url="" data-title="Loading…" data-author="Loading…" data-platform="YouTube" data-img-src="">
              <div class="relative aspect-video bg-black/50 shadow-[rgba(0,0,0,0.25)_0_25px_50px_-12px] border overflow-hidden rounded-xl border-white/10">
                <img id="spotlight-img" src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Spotlight" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                <div class="absolute inset-0 bg-[linear-gradient(to_top,rgba(0,0,0,0.8),rgba(0,0,0,0))]"></div>
                <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    <div class="w-16 h-16 bg-pink-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(255,0,127,0.6)]">
                        <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </div>
                </div>
                <div class="absolute left-0 bottom-0 p-6 md:p-8 pointer-events-none">
                  <div class="text-xs font-medium bg-red-500 text-white inline-flex tracking-[0.6px] mb-3 px-2.5 py-1.5 rounded-md">#1 Trending</div>
                  <h3 id="spotlight-title" class="text-xl font-bold font-space_grotesk md:text-4xl text-white">Loading…</h3>
                  <p id="spotlight-meta" class="text-gray-300 flex items-center gap-2 text-sm md:text-base">
                    <span class="text-pink-600 font-bold">YouTube</span><span>•</span><span id="spotlight-author">Loading…</span>
                  </p>
                </div>
              </div>
            </div>

            <div class="md:col-span-4 space-y-4">
              <div class="backdrop-blur-sm bg-white/10 border p-4 rounded-xl border-white/10">
                <div class="flex items-center gap-4 mb-1">
                  <div class="text-pink-600 bg-pink-600/20 p-3 rounded-full h-10 w-10 flex items-center justify-center font-bold text-xl">#</div>
                  <div>
                    <p class="text-gray-400 text-xs uppercase tracking-[0.7px]">Trending Score</p>
                    <p class="text-2xl font-bold font-space_grotesk text-white" id="spotlight-score">—</p>
                  </div>
                </div>
              </div>
              <div class="backdrop-blur-sm bg-white/10 border p-4 rounded-xl border-white/10">
                <div class="flex items-center gap-4 mb-1">
                  <div class="text-cyan-400 bg-cyan-400/20 p-3 rounded-full h-10 w-10 flex items-center justify-center">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                  </div>
                  <div>
                    <p class="text-gray-400 text-xs uppercase tracking-[0.7px]">Platform Status</p>
                    <p class="text-cyan-400 text-2xl font-bold font-space_grotesk">Online</p>
                  </div>
                </div>
              </div>
              <div class="bg-[linear-gradient(to_right_bottom,rgba(255,0,127,0.2),rgba(0,0,0,0))] border border-pink-600/20 p-4 rounded-xl">
                <h4 class="text-lg font-bold font-space_grotesk mb-1 text-white">Why it's hot</h4>
                <p class="text-gray-400 text-sm" id="spotlight-why">Pulled from YouTube trending every 10 minutes. Rotates #1 → #2 → #3 → back to #1 continuously.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Live Feed Filter Bar -->
      <div class="backdrop-blur-xl bg-gray-900/80 w-full py-4 border-b border-white/10 sticky top-0 z-40 shadow-lg">
        <div class="w-full mx-auto px-4 md:max-w-screen-xl">
          <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-3">
             <div class="text-sm flex items-center gap-3">
                <span class="bg-cyan-400 h-2 w-2 rounded-full animate-pulse"></span>
                <span class="text-cyan-400 font-bold">Live Feed Active</span>
                <span class="text-gray-500">•</span>
                <span id="refresh-countdown" class="text-gray-400">Next refresh in 10:00</span>
             </div>
             <!-- Auto Scroll Control -->
             <button id="toggle-scroll" class="text-xs flex items-center gap-2 bg-white/5 border border-white/10 px-3 py-1.5 rounded-full text-gray-300 hover:bg-white/10 transition-colors">
                <span id="scroll-icon">⏸</span> <span id="scroll-text">Pause Auto-Scroll</span>
             </button>
          </div>
          
          <div class="overflow-auto pb-2 scrollbar-hide">
            <div class="flex items-center min-w-max gap-2">
              <div class="text-gray-400 flex items-center gap-2 mr-4 pr-4 border-r border-white/10">
                 <span class="text-sm font-bold uppercase tracking-[0.7px]">Filter Feed</span>
              </div>
              <button class="text-black text-sm font-bold bg-white h-9 px-6 py-2 rounded-full hover:bg-gray-200">All Streams</button>
              <button class="text-gray-400 text-sm bg-transparent h-9 px-6 py-2 rounded-full border border-gray-700 hover:border-pink-500 hover:text-pink-500 transition-colors">YouTube</button>
              <button class="text-gray-400 text-sm bg-transparent h-9 px-6 py-2 rounded-full border border-gray-700 hover:border-cyan-400 hover:text-cyan-400 transition-colors">TikTok</button>
              <button class="text-gray-400 text-sm bg-transparent h-9 px-6 py-2 rounded-full border border-gray-700 hover:border-purple-500 hover:text-purple-500 transition-colors">Instagram</button>
              <button class="text-gray-400 text-sm bg-transparent h-9 px-6 py-2 rounded-full border border-gray-700 hover:border-blue-500 hover:text-blue-500 transition-colors">Twitter/X</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Cards Masonry (Waterfall Background and Local Scroll) -->
      <section class="relative w-full py-8" id="feed-container">
        <div class="w-full mx-auto px-4 md:max-w-screen-xl feed-content-wrapper">
          <!-- NEW SCROLLABLE AREA -->
          <div id="feed-scroll-area" class="h-[75vh] overflow-y-auto relative z-20"> 
            <div id="card-masonry" class="columns-1 md:columns-3 gap-6">

              <!-- Cards with placeholders (script will populate) -->

              <!-- Card 1: YouTube -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="YouTube">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="YouTube" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                       <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-cyan-400 text-sm uppercase font-space_grotesk">YouTube</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 2: TikTok -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="TikTok">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="TikTok" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-[9/16] w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1547153760-18fc86324498?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-pink-500 text-sm uppercase font-space_grotesk">TikTok</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 3: Instagram -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Instagram">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Reels" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-square w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1513519245088-0e12902e5a38?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-purple-400 text-sm uppercase font-space_grotesk">Reels</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 4: Facebook -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Facebook">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Facebook" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1473093295043-cdd812d0e601?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-blue-500 text-sm uppercase font-space_grotesk">Facebook</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 5: Twitter/X -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Twitter/X">
                  <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                       data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Twitter/X" data-img-src="">
                    <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                      <div class="relative aspect-video w-full overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1620712943543-bcc4688e7485?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                      </div>
                      <div class="p-4">
                        <div class="flex items-center justify-between mb-2">
                          <span class="text-cyan-400 text-sm uppercase font-space_grotesk">Twitter/X</span>
                          <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                        </div>
                        <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                        <p class="text-gray-400 text-sm mb-2">@Loading</p>
                      </div>
                    </div>
                  </div>
                </div>

              <!-- Card 6: Reddit -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Reddit">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Reddit" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-orange-500 text-sm uppercase font-space_grotesk">Reddit</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 7: Twitch -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Twitch">
                  <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                       data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Twitch" data-img-src="">
                    <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                      <div class="relative aspect-video w-full overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                      </div>
                      <div class="p-4">
                        <div class="flex items-center justify-between mb-2">
                          <span class="text-purple-500 text-sm uppercase font-space_grotesk">Twitch</span>
                          <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                        </div>
                        <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                        <p class="text-gray-400 text-sm mb-2">@Loading</p>
                      </div>
                    </div>
                  </div>
              </div>

              <!-- Card 8: YouTube -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="YouTube">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="YouTube" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1556656793-02715d8dd6f8?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-cyan-400 text-sm uppercase font-space_grotesk">YouTube</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 9: TikTok -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="TikTok">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="TikTok" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1497215728101-856f4ea42174?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-pink-500 text-sm uppercase font-space_grotesk">TikTok</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 10: Instagram -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Instagram">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Reels" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-[9/16] w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1526392060635-9d6019884377?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-purple-400 text-sm uppercase font-space_grotesk">Reels</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 11: Facebook -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Facebook">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Facebook" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1509391366360-2e959784a276?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-blue-500 text-sm uppercase font-space_grotesk">Facebook</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 12: Vimeo -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Vimeo">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Vimeo" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-red-500 shadow-[rgb(255,65,54)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-cyan-400 text-sm uppercase font-space_grotesk">Vimeo</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 13: Dailymotion -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="Dailymotion">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="Dailymotion" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1505666287802-931dc83948e9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Dunks" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-cyan-400 text-sm uppercase font-space_grotesk">Dailymotion</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 14: YouTube -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="YouTube">
                <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                     data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="YouTube" data-img-src="">
                  <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                    <div class="relative aspect-video w-full overflow-hidden">
                      <img src="https://images.unsplash.com/photo-1544928147-79a2dbc1f389?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Public Speaking" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                      <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                    </div>
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-cyan-400 text-sm uppercase font-space_grotesk">YouTube</span>
                        <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                      </div>
                      <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                      <p class="text-gray-400 text-sm mb-2">@Loading</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Card 15: TikTok -->
              <div class="break-inside-avoid mb-6 card-entry" data-platform-id="TikTok">
                  <div class="card-trigger relative bg-gray-900/50 border overflow-hidden rounded-2xl border-white/10 cursor-pointer group hover:border-cyan-400/50 transition-colors"
                       data-embed-url="" data-title="Loading…" data-author="@Loading" data-platform="TikTok" data-img-src="">
                    <div class="bg-slate-800 shadow rounded-lg overflow-hidden">
                      <div class="relative aspect-video w-full overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Morning Routine" class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute flex gap-2 right-3 top-3"><div class="h-3 w-3 rounded-full bg-cyan-400 shadow-[rgb(0,255,255)_0_0_10px_0]"></div></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/30">
                          <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center">
                               <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                          </div>
                      </div>
                      </div>
                      <div class="p-4">
                        <div class="flex items-center justify-between mb-2">
                          <span class="text-pink-500 text-sm uppercase font-space_grotesk">TikTok</span>
                          <span class="text-gray-400 text-xs">Score: <span class="score">—</span></span>
                        </div>
                        <h3 class="text-lg font-space_grotesk mb-2 text-white">Loading…</h3>
                        <p class="text-gray-400 text-sm mb-2">@Loading</p>
                      </div>
                    </div>
                  </div>
                </div>

            </div>
          </div>
          <!-- END OF SCROLLABLE AREA -->
        </div>
      </section>
    </main>
  </div>
</div>

<!-- ========================================== -->
<!-- THE POPUP MODAL -->
<!-- ========================================== -->
<div id="video-modal" class="fixed inset-0 z-[999] hidden" role="dialog" aria-modal="true">
    <div id="modal-backdrop" class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity duration-300"></div>

    <div class="relative z-10 w-full h-full flex items-center justify-center p-4">
        <div class="bg-gray-900 w-full max-w-6xl h-[90vh] md:h-[80vh] rounded-2xl border border-white/10 shadow-2xl overflow-hidden flex flex-col md:flex-row transform transition-all duration-300 scale-95 opacity-0" id="modal-panel">
            
            <div class="w-full md:w-[400px] flex flex-col bg-gray-900 border-r border-white/10 h-1/2 md:h-full order-2 md:order-1 relative">
                <div class="p-5 border-b border-white/10 flex justify-between items-start">
                    <div>
                        <span id="modal-platform" class="text-xs font-bold uppercase tracking-wider px-2 py-1 rounded bg-white/10 text-cyan-400 mb-2 inline-block">YOUTUBE</span>
                        <h2 id="modal-title" class="text-xl font-bold font-space_grotesk text-white leading-tight">Video Title</h2>
                        <p id="modal-author" class="text-sm text-gray-400 mt-1">@AuthorName</p>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-5 custom-scrollbar bg-black/20">
                    <h3 class="text-sm font-bold text-gray-300 uppercase tracking-widest mb-4">Comments</h3>
                    <div id="modal-comments" class="space-y-4">
                    </div>
                </div>

                <div class="p-5 border-t border-white/10 bg-gray-800/50">
                    <div class="flex gap-3 mb-4">
                        <button class="flex-1 flex items-center justify-center gap-2 bg-pink-600 hover:bg-pink-500 text-white py-3 rounded-lg font-bold transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                            Like
                        </button>
                        <button class="flex-1 flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 text-white py-3 rounded-lg font-bold transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>
                            Save
                        </button>
                    </div>
                    <div class="text-center text-xs text-gray-500">
                        Viewed by 12,402 people right now
                    </div>
                </div>
            </div>

            <div class="flex-1 bg-black relative h-1/2 md:h-full order-1 md:order-2 group">
                <button id="close-modal-btn" class="absolute top-4 right-4 z-50 bg-black/50 hover:bg-red-500/80 text-white p-2 rounded-full backdrop-blur-md transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>

                <div id="video-container" class="w-full h-full flex items-center justify-center bg-black relative">
                    <div id="video-thumbnail-wrapper" class="absolute inset-0 cursor-pointer w-full h-full">
                        <img id="video-thumbnail" src="" class="w-full h-full object-contain opacity-80 group-hover:opacity-60 transition-opacity">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-20 h-20 bg-pink-600 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(255,0,127,0.6)] transform group-hover:scale-110 transition-transform">
                                <svg class="w-10 h-10 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <div class="absolute bottom-10 w-full text-center">
                            <p class="text-white font-bold text-lg tracking-widest uppercase">Click to Play</p>
                        </div>
                    </div>
                    <div id="iframe-wrapper" class="w-full h-full hidden"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Elements ---
        const scrollableElement = document.getElementById('feed-scroll-area');
        const cardMasonry = document.getElementById('card-masonry');
        const countdownEl = document.getElementById('refresh-countdown');
        if (!scrollableElement || !cardMasonry || !countdownEl) return;

        // --- Live Refresh Constants (10 minutes) ---
        const REFRESH_INTERVAL_SECONDS = 600; // 10 minutes
        let secondsLeft = REFRESH_INTERVAL_SECONDS;
        let countdownInterval;

        // --- Rotation Constants ---
        const ROTATION_INTERVAL_MS = 5 * 60 * 1000; // rotate each platform every 5 minutes
        const MAX_TRENDING_PER_PLATFORM = 3; // show top 3 then loop

        // --- Helper: format time (MM:SS) ---
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // --- Live Countdown Timer ---
        function updateCountdown() {
            secondsLeft--;
            if (secondsLeft < 0) {
                // Refresh the data but DO NOT reset rotation indices
                refreshFeedLive(); 
                secondsLeft = REFRESH_INTERVAL_SECONDS;
            }
            countdownEl.textContent = `Next refresh in ${formatTime(secondsLeft)}`;
        }
        function startCountdown() {
            if (countdownInterval) clearInterval(countdownInterval);
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 1000);
        }

        // --- Auto Scroll Feature ---
        let autoScrollActive = true;
        let scrollInterval;
        const scrollSpeed = 1; // px
        const scrollTick = 50; // ms

        const toggleBtn = document.getElementById('toggle-scroll');
        const scrollIcon = document.getElementById('scroll-icon');
        const scrollText = document.getElementById('scroll-text');

        function startAutoScroll() {
            if(scrollInterval) clearInterval(scrollInterval);
            scrollInterval = setInterval(() => {
                const atBottom = scrollableElement.scrollHeight - scrollableElement.scrollTop <= scrollableElement.clientHeight + 1;
                if (atBottom) scrollableElement.scrollTop = 0; 
                else scrollableElement.scrollTop += scrollSpeed;
            }, scrollTick);
            scrollIcon.textContent = '⏸';
            scrollText.textContent = 'Pause Auto-Scroll';
            toggleBtn.classList.add('border-cyan-400', 'text-cyan-400');
            autoScrollActive = true;
        }
        function stopAutoScroll() {
            if(scrollInterval) clearInterval(scrollInterval);
            scrollIcon.textContent = '▶';
            scrollText.textContent = 'Resume Scroll';
            toggleBtn.classList.remove('border-cyan-400', 'text-cyan-400');
            autoScrollActive = false;
        }
        toggleBtn.addEventListener('click', () => {
            if(autoScrollActive) stopAutoScroll();
            else startAutoScroll();
        });
        scrollableElement.addEventListener('mouseenter', () => { if(autoScrollActive) clearInterval(scrollInterval); });
        scrollableElement.addEventListener('mouseleave', () => { if(autoScrollActive) startAutoScroll(); });

        // --- Modal Logic ---
        const modal = document.getElementById('video-modal');
        const modalPanel = document.getElementById('modal-panel');
        const backdrop = document.getElementById('modal-backdrop');
        const closeBtn = document.getElementById('close-modal-btn');
        const mTitle = document.getElementById('modal-title');
        const mAuthor = document.getElementById('modal-author');
        const mPlatform = document.getElementById('modal-platform');
        const mThumb = document.getElementById('video-thumbnail');
        const mThumbWrapper = document.getElementById('video-thumbnail-wrapper');
        const mIframeWrapper = document.getElementById('iframe-wrapper');
        const mComments = document.getElementById('modal-comments');
        let wasScrollActiveBeforeModal = false;

        function generateComments(count) {
            const names = ["Alex_Pro", "SarahJ", "VibeMaster", "TechGeek99", "LunaStar"];
            const texts = ["This is actually insane! 🔥", "Does anyone know the song used here?", "First time seeing this, love it.", "The ending got me 😂", "Quality content right here."];
            let html = '';
            for(let i=0; i<count; i++) {
                const name = names[Math.floor(Math.random() * names.length)];
                const text = texts[Math.floor(Math.random() * texts.length)];
                html += `
                    <div class="flex gap-3 items-start animate-fade-in" style="animation-delay: ${i * 0.1}s">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex-shrink-0"></div>
                        <div>
                            <p class="text-xs text-gray-400 font-bold mb-0.5">${name}</p>
                            <p class="text-sm text-gray-200">${text}</p>
                        </div>
                    </div>
                `;
            }
            return html;
        }

        function openModal(data) {
            wasScrollActiveBeforeModal = autoScrollActive;
            stopAutoScroll(); 
            mIframeWrapper.innerHTML = '';
            mIframeWrapper.classList.add('hidden');
            mThumbWrapper.classList.remove('hidden');

            mTitle.textContent = data.title;
            mAuthor.textContent = data.author;
            mPlatform.textContent = data.platform;
            mThumb.src = data.imgSrc || data.img_src || '';
            mComments.innerHTML = generateComments(5);

            mThumbWrapper.onclick = () => {
                mThumbWrapper.classList.add('hidden');
                mIframeWrapper.classList.remove('hidden');
                mIframeWrapper.innerHTML = `<iframe src="${data.embedUrl}" class="w-full h-full" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            };

            modal.classList.remove('hidden');
            setTimeout(() => {
                modalPanel.classList.remove('scale-95', 'opacity-0');
                modalPanel.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeModal() {
            modalPanel.classList.remove('scale-100', 'opacity-100');
            modalPanel.classList.add('scale-95', 'opacity-0');
            if (wasScrollActiveBeforeModal) startAutoScroll();
            setTimeout(() => {
                modal.classList.add('hidden');
                mIframeWrapper.innerHTML = '';
            }, 300);
        }
        function handleCardClick() {
            const trigger = this;
            const data = {
                embedUrl: trigger.dataset.embedUrl,
                title: trigger.dataset.title,
                author: trigger.dataset.author,
                platform: trigger.dataset.platform,
                imgSrc: trigger.dataset.imgSrc 
            };
            openModal(data);
        }
        document.querySelectorAll('.card-trigger').forEach(trigger => {
            trigger.addEventListener('click', handleCardClick);
        });

        // --- Initial card entry animation ---
        const initialCards = document.querySelectorAll('.card-entry');
        initialCards.forEach((card, index) => {
            card.style.animation = `fadeInUp 0.6s ease-out forwards ${index * 0.1}s`;
        });

        // --- API Key handling and live YouTube trending integration + rotation ---
        let API_KEY = null;
        const apiBar = document.getElementById('api-key-bar');
        const apiInput = document.getElementById('api-key-input');
        const apiSubmit = document.getElementById('api-key-submit');
        const apiError = document.getElementById('api-key-error');

        // Spotlight elements
        const spotlightCard = document.querySelector('.grid.md\\:grid-cols-12 .card-trigger');
        const spotlightImg = document.getElementById('spotlight-img');
        const spotlightTitle = document.getElementById('spotlight-title');
        const spotlightAuthor = document.getElementById('spotlight-author');
        const spotlightScore = document.getElementById('spotlight-score');

        // Rotation state per platform
        const PLATFORMS = [
          "YouTube","TikTok","Instagram","Facebook","Twitter/X",
          "Reddit","Twitch","YouTube","TikTok","Instagram",
          "Facebook","Vimeo","Dailymotion","YouTube","TikTok"
        ];
        const rotationIndexByPlatform = {}; // { platformId: 0..2 }
        const videosByPlatform = {}; // { platformId: [top3Videos] }

        // Initialize rotation indices
        PLATFORMS.forEach(p => rotationIndexByPlatform[p] = 0);

        async function fetchTrendingYouTube(maxResults = 30, regionCode = 'US') {
            if (!API_KEY) return null;
            const url = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&regionCode=${regionCode}&maxResults=${maxResults}&key=${API_KEY}`;
            const res = await fetch(url);
            const data = await res.json();
            if (!data.items) throw new Error('Invalid API response');
            return data.items;
        }

        // Helper: score approximation from view count
        function approximateScore(views) {
            const v = Number(views || 0);
            if (!v) return '—';
            const score = Math.min(99.9, Math.round((Math.log10(v + 1) / 6) * 1000) / 10);
            return typeof score === 'number' ? score.toFixed(1) : '—';
        }

        // Assign sets (top 3) to each platform from the global trending list
        function distributeVideosToPlatforms(allVideos) {
            let cursor = 0;
            PLATFORMS.forEach(p => {
                const subset = allVideos.slice(cursor, cursor + MAX_TRENDING_PER_PLATFORM);
                if (subset.length < MAX_TRENDING_PER_PLATFORM) {
                    const remaining = MAX_TRENDING_PER_PLATFORM - subset.length;
                    videosByPlatform[p] = subset.concat(allVideos.slice(0, remaining));
                } else {
                    videosByPlatform[p] = subset;
                }
                cursor = (cursor + MAX_TRENDING_PER_PLATFORM) % allVideos.length;
            });
        }

        // Render a specific platform card using its current rotation index
        function showPlatformVideo(platformId) {
            const list = videosByPlatform[platformId];
            if (!list || list.length === 0) return;

            // keep index within bounds in case list length changed
            rotationIndexByPlatform[platformId] = rotationIndexByPlatform[platformId] % list.length;

            const idx = rotationIndexByPlatform[platformId];
            const v = list[idx];
            const vidId = v.id;
            const title = v.snippet.title;
            const author = v.snippet.channelTitle;
            const thumb =
              (v.snippet.thumbnails?.standard?.url) ||
              (v.snippet.thumbnails?.high?.url) ||
              (v.snippet.thumbnails?.medium?.url) || '';

            const card = document.querySelector(`#card-masonry .card-entry[data-platform-id="${CSS.escape(platformId)}"] .card-trigger`);
            if (!card) return;

            // Update dataset for modal
            card.dataset.embedUrl = `https://www.youtube.com/embed/${vidId}?autoplay=1`;
            card.dataset.title = title;
            card.dataset.author = author;
            card.dataset.platform = platformId;
            card.dataset.imgSrc = thumb;

            // Update visible card content
            const imgEl = card.querySelector('img');
            if (imgEl && thumb) imgEl.src = thumb;
            const titleEl = card.querySelector('h3');
            if (titleEl) titleEl.textContent = title;
            const authorEl = card.querySelector('p');
            if (authorEl) authorEl.textContent = author;

            const scoreEl = card.querySelector('.score');
            if (scoreEl) scoreEl.textContent = approximateScore(v.statistics?.viewCount);

            // Update spotlight with the current top video (YouTube primary card only when index is 0)
            if (platformId === 'YouTube' && spotlightCard && idx === 0) {
                spotlightCard.dataset.embedUrl = `https://www.youtube.com/embed/${vidId}?autoplay=1`;
                spotlightCard.dataset.title = title;
                spotlightCard.dataset.author = author;
                spotlightCard.dataset.platform = 'YouTube';
                spotlightCard.dataset.imgSrc = thumb;

                if (spotlightImg && thumb) spotlightImg.src = thumb;
                if (spotlightTitle) spotlightTitle.textContent = title;
                if (spotlightAuthor) spotlightAuthor.textContent = author;
                if (spotlightScore) spotlightScore.textContent = approximateScore(v.statistics?.viewCount);
            }
        }

        // Rotate a platform to next video and render
        function rotatePlatform(platformId) {
            const list = videosByPlatform[platformId];
            if (!list || list.length === 0) return;
            rotationIndexByPlatform[platformId] = (rotationIndexByPlatform[platformId] + 1) % list.length;
            showPlatformVideo(platformId);
        }

        // Render all platforms at their current indices (keeps spacing intact)
        function renderAllPlatforms() {
            PLATFORMS.forEach(p => showPlatformVideo(p));
        }

        // Start rotation intervals (one unified interval for smooth spacing)
        function startRotationLoop() {
            setInterval(() => {
                PLATFORMS.forEach(p => rotatePlatform(p));
            }, ROTATION_INTERVAL_MS);
        }

        async function refreshFeedLive() {
            if (!API_KEY) return;
            try {
                const allVideos = await fetchTrendingYouTube(30, 'US'); // fetch enough to distribute
                // Preserve current indices; just reassign lists
                distributeVideosToPlatforms(allVideos);
                PLATFORMS.forEach(p => {
                    // keep current rotation index within bounds (no reset to 0)
                    const list = videosByPlatform[p] || [];
                    if (list.length > 0) {
                        rotationIndexByPlatform[p] = rotationIndexByPlatform[p] % list.length;
                    } else {
                        rotationIndexByPlatform[p] = 0;
                    }
                });
                renderAllPlatforms();
            } catch (e) {
                console.error('Live refresh failed:', e);
                if (apiError) apiError.classList.remove('hidden');
            }
        }

        // API key submit
        apiSubmit.addEventListener('click', async () => {
            API_KEY = (apiInput.value || '').trim();
            if (!API_KEY) { apiError.classList.remove('hidden'); return; }
            apiError.classList.add('hidden');
            // Remove key bar
            apiBar.remove();

            // Start live behavior
            await refreshFeedLive();  // initial data load
            startAutoScroll();
            startCountdown();
            startRotationLoop();      // continuous rotation
        });

        // Close modal handlers
        closeBtn.addEventListener('click', closeModal);
        backdrop.addEventListener('click', closeModal);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal();
        });
    });
</script>

</body>
</html>
